webpackJsonp([7],{Abck:function(t,s){},Dsl3:function(t,s){},G3VY:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Q50t"),e=i("VsUZ"),n=(i("I9qK"),i("MfrR")),r=i("kK2N"),o={mixins:[a.b],name:"CarWashDetails",data:function(){return{clientvid:"",id:"",shopId:"",selected:"立即下单",bannerList:[],carwashMsg:{},typeData:[],myCarList:[],name:"",phone:"",project:[],remark:"",servername:"",price:"",content:""}},components:{"right-mt-popup":n.a,"appoint-public":r.a},created:function(){var t=this.$route.params.gainData;t&&(t=JSON.parse(t),this.id=t.id,this.shopId=t.shop_id),this.init();var s=this.$store.getters.getStorage;this.clientvid=s?s.vid:"",this.initCarList()},watch:{date:function(t,s){}},methods:{init:function(){var t=this;Object(e.C)({id:this.id,shop_id:this.shopId}).then(function(s){t.carwashMsg=s.shop,t.bannerList=s.shop.images,t.price=s.shop.price,t.content=t.$options.filters.unescape(s.shop.content);s.project.map(function(s,i){s.id==t.id&&(t.servername=s.typename),t.typeData.push({type:1,name:s.typename,id:s.id,price:s.price,active:t.servername==s.typename})})})},initCarList:function(){var t=this;Object(e.B)({clientvid:this.clientvid}).then(function(s){s.map(function(s,i){t.myCarList.push({name:s.carNo,value:s.vid})})})},openMap:function(t,s,i,a){this.map(t,s,i,a)},gainReqData:function(t){var s=this;this.carvid=t.carvid,this.carNo=t.carNo,this.orderDay=t.orderDay,this.date=t.date,this.time=t.time,this.project=t.project,this.name=t.name,this.phone=t.phone,this.remark=t.remark;var i=this.project.name;this.typeData.map(function(t,a){t.name!=i||(s.price=t.price)})},save:function(t){var s=this;if(!this.date)return this.$store.commit("showToast","请选择预约日期"),!1;if(!this.time)return this.$store.commit("showToast","请选择预约时间"),!1;if(!this.carvid||!this.carNo)return this.$store.commit("showToast","请选择服务车辆"),!1;if(!this.name)return this.$store.commit("showToast","请输入用户姓名"),!1;if(!this.phone)return this.$store.commit("showToast","请输入用户电话"),!1;if(/^1[3|5|8]\d{9}$/.test(this.phone)){var i={carvid:this.carvid,clientvid:this.clientvid,date:this.date,phone:this.phone,remark:this.remark,appname:this.name,name:this.name,id:this.id,shop_id:this.shopId};Object(e.n)(i).then(function(t){t&&!t.errorCode&&s.$store.commit("delay",{url:"/Index/CarWash/CarWashPayPage/"+t.orderNo,$router:s.$router})})}else this.$store.commit("showToast","请输入正确的联系电话")}}},c={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"carwash-wrap mask"},[a("div",{staticClass:"wallet"},[a("div",{staticClass:"nav"},[t.bannerList?a("div",{staticClass:"swiper-wrapper"},[a("mt-swipe",{attrs:{auto:4e3}},t._l(t.bannerList,function(t,s){return a("mt-swipe-item",{key:s},[a("img",{staticClass:"swiper-img",attrs:{src:t,alt:"门店图片"}})])}))],1):t._e(),t._v(" "),a("div",{staticClass:"nav_center"},[a("p",[t._v("地址："+t._s(t.carwashMsg.shop_name))]),t._v(" "),a("div",{staticClass:"star-box"},[a("span",{staticClass:"assess"},[t._v("评价：")]),t._v(" "),a("score-lv",{attrs:{stars:t.carwashMsg.evaluateShow-0}})],1)])]),t._v(" "),a("div",{staticClass:"section"},[a("div",{staticClass:"section_top"},[a("div",{staticClass:"section_top_left"},[a("img",{staticClass:"section_top_img",attrs:{src:i("TGhw")}}),t._v(" "),a("p",{staticClass:"section_top_left_ptop"},[t._v(t._s(t.carwashMsg.city)+t._s(t.carwashMsg.dist)+t._s(t.carwashMsg.address))])]),t._v(" "),a("div",{staticClass:"section_top_right",on:{click:function(s){s.stopPropagation(),t.openMap(t.carwashMsg.longitude,t.carwashMsg.latitude,t.carwashMsg.shop_name,t.carwashMsg.address)}}},[t._m(0)])])])]),t._v(" "),a("div",{staticClass:"setPosition"},[a("mt-tabbar",{attrs:{fixed:""},model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"立即下单"}},[t._v("  \n        立即下单  \n      ")]),t._v(" "),a("mt-tab-item",{attrs:{id:"项目介绍"}},[t._v("  \n        项目介绍 \n      ")])],1),t._v(" "),t.clientvid?a("div",{staticClass:"tabCon"},[a("mt-tab-container",{staticClass:"page-tabbar-container",model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"立即下单"}},[a("div",{staticClass:"footer"},[a("appoint-public",{attrs:{servertype:"3",proname:t.servername,myCarList:t.myCarList,shopId:t.shopId,typeData:t.typeData},on:{gainReqData:t.gainReqData}})],1),t._v(" "),a("div",{staticClass:"appoint_footer"},[a("div",{staticClass:"appoint_footer_p"},[a("p",[t._v("实付:")]),t._v(" "),a("p",[t._v("¥")]),t._v(" "),a("p",[t._v(t._s(t.price))])]),t._v(" "),a("div",{on:{click:function(s){s.stopPropagation(),t.save(s)}}},[a("button",{staticClass:"appoint_btn"},[t._v("立即下单")])])])]),t._v(" "),a("mt-tab-container-item",{attrs:{id:"项目介绍"}},[a("div",{staticClass:"set-content",domProps:{innerHTML:t._s(t.content)}})])],1)],1):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"section_top_right_img"},[s("div",{staticClass:"line"}),this._v(" "),s("img",{staticClass:"section_top_right_img_img",attrs:{src:i("Egld"),alt:""}}),this._v(" "),s("p",[this._v("导航")])])}]},p=i("VU/8")(o,c,!1,function(t){i("imft"),i("Abck"),i("Dsl3")},"data-v-bde3b5b6",null);s.default=p.exports},imft:function(t,s){}});