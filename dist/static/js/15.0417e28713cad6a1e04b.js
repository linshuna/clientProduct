webpackJsonp([15],{Xj85:function(t,s){},p0Pa:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Q50t"),i=e("VsUZ"),r=e("aYDR"),n=e("hU7x"),o={mixins:[a.b],name:"NearbyStores",components:{"pro-city-area":r.a},data:function(){return{longitude:"",latitude:"",StoreaList:[],pageData:{},addressValue:0,addressName:"",checkedName:"",currentPicker:1,popupVisible:!1,addressname:{},allAddress:[],search:"",sorts:1,sortsText:"默认排序",isOpen:!1,isChangeRouter:!1,mapIcon:e("TGhw")}},created:function(){},mounted:function(){var t=this;n("https://apis.map.qq.com/ws/location/v1/ip?key=IK2BZ-QCAKQ-QJ45W-GCLNJ-JCWSK-GWBYA&output=jsonp",null,function(s,e){var a=e.result,i=a.ad_info.city+" "+a.ad_info.district;t.$set(t.addressname,"name",i),t.$set(t.addressname,"longitude",a.location.lng),t.$set(t.addressname,"latitude",a.location.lat),t.$set(t.addressname,"code",a.ad_info.adcode)}),window.addEventListener("popstate",function(s){t.isChangeRouter=!1},!1)},watch:{addressname:function(t,s){this.longitude=t.longitude,this.latitude=t.latitude,this._getNearbyStorea()}},methods:{_getNearbyStorea:function(){var t=this;Object(i._0)({longitude:this.longitude,latitude:this.latitude,search:this.search,sorts:this.sorts}).then(function(s){t.StoreaList=s.store})},changeType:function(t){this.currentPicker=t,this.popupVisible=!0},onValuesChange:function(){document.getElementsByClassName("picker-slot-wrapper")[0]},gainAllAddress:function(t){this.$set(this.addressname,"name",t.area),this.search=t.search,this._getNearbyStorea()},gainSort:function(t){this.sorts=t.value,this.sortsText=t.name,this._getNearbyStorea()},openMap:function(t,s,e,a){window.location.href="https://apis.map.qq.com/tools/poimarker?type=0&marker=coord:"+s+","+t+";title:"+e+";addr:"+a+";&key=IK2BZ-QCAKQ-QJ45W-GCLNJ-JCWSK-GWBYA&referer=myapp "},lookStoreDetail:function(t){this.isChangeRouter=!0,this.$router.push({path:"/NearbyStores/storeDetail/"+t})}}},c={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"nearby-stores"},[a("nav",[a("div",{staticClass:"addres",on:{click:function(s){t.changeType(1)}}},[a("p",[t._v(t._s(t.addressname.name))]),t._v(" "),a("img",{attrs:{src:e("91q3"),alt:""}})]),t._v(" "),a("p",{staticClass:"sort",on:{click:function(s){t.changeType(2)}}},[t._v(t._s(t.sortsText)+"\n        "),a("img",{attrs:{src:e("91q3"),alt:""}})])]),t._v(" "),a("pro-city-area",{attrs:{current:t.currentPicker,popupVisible:t.popupVisible},on:{"update:current":function(s){t.currentPicker=s},"update:popupVisible":function(s){t.popupVisible=s},gainAllAddress:t.gainAllAddress,gainSort:t.gainSort}}),t._v(" "),t.StoreaList&&t.StoreaList.length>0?[a("ul",{staticClass:"store-list"},t._l(t.StoreaList,function(s){return a("li",{on:{click:function(e){e.stopPropagation(),t.lookStoreDetail(s.id)}}},[a("div",{staticClass:"store-hd",on:{click:function(e){t.lookStoreDetail(s.id)}}},[a("p",[t._v(t._s(s.name))]),t._v(" "),a("img",{staticClass:"r-arrow",attrs:{src:e("q8gq"),alt:""}})]),t._v(" "),a("div",{staticClass:"store-bd clearfix"},[a("img",{staticClass:"store-img fl",attrs:{src:s.pic,alt:""}}),t._v(" "),a("div",{staticClass:"store-info-box fl"},[a("div",{staticClass:"star-box"},[a("span",{staticClass:"assess"},[t._v("评价：")]),t._v(" "),a("score-lv",{attrs:{stars:s.evaluateShow-0}})],1),t._v(" "),a("div",{staticClass:"item-box"},[a("div",{class:{"app-hot":2==s.state,"app-accept":1==s.state,"app-full":0==s.state||3==s.state}},[t._v(t._s(t._f("serverTypeFilter")(s.state)))]),t._v(" "),a("div",{staticClass:"item-sum"},[t._v(t._s(s.type_name))])]),t._v(" "),a("p",{staticClass:"store-time"},[t._v("服务时间："+t._s(s.storeTime))]),t._v(" "),a("p",{staticClass:"store-address"},[t._v("地址："+t._s(s.city)+t._s(s.dist)+t._s(s.address))])]),t._v(" "),a("div",{staticClass:"setRight"},[a("div",[a("img",{staticClass:"dist-icon",attrs:{src:t.mapIcon,alt:""},on:{click:function(e){e.stopPropagation(),t.openMap(s.longitude,s.latitude,s.name,s.address)}}})]),t._v(" "),a("div",{staticClass:"store-dist"},[t._v("\n                    大约\n                    "+t._s(t._f("distanceFilter")(s.distance))+"\n                  ")])])])])}))]:[a("p",{staticStyle:{"text-align":"center","margin-top":"10%","font-size":".28rem"}},[t._v("暂时搜索不到店铺，更换筛选条件")])]],2)},staticRenderFns:[]},l=e("VU/8")(o,c,!1,function(t){e("Xj85"),e("r5Es")},"data-v-daf8627e",null);s.default=l.exports},r5Es:function(t,s){}});