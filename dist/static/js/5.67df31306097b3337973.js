webpackJsonp([5],{C2Ve:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Q50t"),a=s("VsUZ"),r={props:{popupVisible:{type:Boolean},current:{type:Number}},data:function(){return{slots:[],province:[],city:[],area:[],allAddress:[],checkedStatus:[{name:"附近优先",value:"2"},{name:"累计点评",value:"3"},{name:"默认排序",value:"1"},{name:"评分最高",value:"4"}]}},created:function(){this.initCity()},watch:{current:function(e,t){this.changeAddress(e)}},methods:{initCity:function(){var e=this;Object(a.n)().then(function(t){t.map(function(t,s){e.allAddress.push({name:t.province,value:s,children:[]});var n=[];t.citylist.length;t.citylist.map(function(t,a){n.push({name:t.city,value:a,children:[]}),e.allAddress[s].children=n;var r=[],i=t.area.length;t.area.map(function(t,n){r.push({name:t.dist,value:t.areaCode}),n+1==i&&r.push({name:"全部",value:0}),e.allAddress[s].children[a].children=r})})}),e.changeAddress(e.current)})},changeAddress:function(e){this.slots=1==e?[{flex:1,defaultIndex:0,values:this.allAddress,className:"slot1",textAlign:"center"},{divider:!0,content:"-",className:"slot2"},{flex:1,values:this.allAddress[0].children,defaultIndex:0,className:"slot3",textAlign:"center"},{divider:!0,content:"-",className:"slot4"},{flex:1,defaultIndex:1,values:this.allAddress[0].children[0].children,className:"slot5",textAlign:"center"}]:[{defaultIndex:2,flex:1,values:this.checkedStatus,textAlign:"left"}]},cancle:function(){this.$emit("update:popupVisible",!1)},select:function(){var e=this.$refs.pickerObj.getValues();if(1==this.current){var t="";t=0==e[2].value?e[1].name:e[2].value;var s=e[1].name+" "+e[2].name;this.$emit("gainAllAddress",{search:t,area:s})}else this.$emit("gainSort",e[0].value);this.$emit("update:popupVisible",!1)},onMyAddressChange:function(e,t){if(1==this.current){var s=t[0];if(t[0]||t[1]||t[2]){var n=t[1];e.setSlotValues(1,s.children),e.setSlotValues(2,n.children),this.slots[1].defaultIndex=0,this.slots[2].defaultIndex=0}}}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("mt-popup",{attrs:{position:"top"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[s("mt-picker",{ref:"pickerObj",attrs:{slots:e.slots,valueKey:"name"},on:{change:e.onMyAddressChange}}),e._v(" "),s("div",{staticClass:"picker-toolbar"},[s("span",{staticClass:"mint-datetime-cancel",on:{click:function(t){t.stopPropagation(),e.cancle(t)}}},[e._v("取消")]),e._v(" "),s("span",{staticClass:"mint-datetime-confirm",on:{click:function(t){t.stopPropagation(),e.select(t)}}},[e._v("确定")])])],1)],1)},staticRenderFns:[]},o=s("VU/8")(r,i,!1,function(e){s("dmip")},null,null).exports,c=s("hU7x"),l={mixins:[n.b],name:"NearbyStores",components:{"pro-city-area":o},data:function(){return{longitude:"",latitude:"",StoreaList:[],pageData:{},addressValue:0,addressName:"",checkedName:"",currentPicker:1,popupVisible:!1,addressname:{},allAddress:[],search:"",sorts:1}},created:function(){},mounted:function(){var e=this;c("http://apis.map.qq.com/ws/location/v1/ip?key=IK2BZ-QCAKQ-QJ45W-GCLNJ-JCWSK-GWBYA&get_poi=0&output=jsonp",null,function(t,s){var n=s.result,a=n.ad_info.city+" "+n.ad_info.district;e.$set(e.addressname,"name",a),e.$set(e.addressname,"longitude",n.location.lng),e.$set(e.addressname,"latitude",n.location.lat),e.$set(e.addressname,"code",n.ad_info.adcode),console.log(n)})},watch:{addressname:function(e,t){this.longitude=e.longitude,this.latitude=e.latitude,this.search=e.code,this._getNearbyStorea()}},methods:{_getNearbyStorea:function(){var e=this;Object(a.y)({longitude:this.longitude,latitude:this.latitude,search:this.search,sorts:this.sorts}).then(function(t){e.StoreaList=t.store})},changeType:function(e){this.currentPicker=e,this.popupVisible=!0},onValuesChange:function(){document.getElementsByClassName("picker-slot-wrapper")[0]},gainAllAddress:function(e){this.$set(this.addressname,"name",e.area),this.search=e.search,this._getNearbyStorea()},gainSort:function(e){this.sorts=e,this._getNearbyStorea()}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nearby-stores"},[n("nav",[n("div",{staticClass:"addres",on:{click:function(t){e.changeType(1)}}},[n("p",[e._v(e._s(e.addressname.name))]),e._v(" "),n("img",{attrs:{src:s("91q3"),alt:""}})]),e._v(" "),n("p",{staticClass:"sort",on:{click:function(t){e.changeType(2)}}},[e._v("默认排序\n            "),n("img",{attrs:{src:s("91q3"),alt:""}})])]),e._v(" "),n("pro-city-area",{attrs:{current:e.currentPicker,popupVisible:e.popupVisible},on:{"update:current":function(t){e.currentPicker=t},"update:popupVisible":function(t){e.popupVisible=t},gainAllAddress:e.gainAllAddress,gainSort:e.gainSort}}),e._v(" "),n("ul",{staticClass:"store-list"},e._l(e.StoreaList,function(t){return n("li",[n("div",{staticClass:"store-hd"},[n("p",[e._v(e._s(t.name))]),e._v(" "),n("img",{staticClass:"r-arrow",attrs:{src:s("q8gq"),alt:""}})]),e._v(" "),n("div",{staticClass:"store-bd clearfix"},[n("img",{staticClass:"store-img fl",attrs:{src:t.pic,alt:""}}),e._v(" "),n("div",{staticClass:"store-info-box fl"},[n("p",{staticClass:"store-address"},[e._v(e._s(t.province)+e._s(t.city)+e._s(t.dist)+e._s(t.address))]),e._v(" "),n("div",{staticClass:"star-box"},[n("score-lv",{attrs:{stars:t.evaluateShow-0}})],1),e._v(" "),n("div",{staticClass:"item-box"},[1==e.StoreaList.state?n("div",{staticClass:"appointment"},[e._v("接受预约")]):2==e.StoreaList.state?n("div",{staticClass:"appointment app-hot"},[e._v("预约火爆")]):n("div",{staticClass:"appointment app-full"},[e._v("预约已满")]),e._v(" "),n("div",{staticClass:"item-sum"},[e._v("维修丶保养")])]),e._v(" "),n("p",{staticClass:"store-time"},[e._v(e._s(t.storeTime))]),e._v(" "),n("div",{staticClass:"store-dist"},[e._v("距离"+e._s(Math.round(t.distance))+"m")]),e._v(" "),n("img",{staticClass:"dist-icon",attrs:{src:s("TGhw"),alt:""}})])])])}))],1)},staticRenderFns:[]},d=s("VU/8")(l,u,!1,function(e){s("zmxu"),s("FlvL")},"data-v-5df03356",null);t.default=d.exports},EarI:function(e,t){function s(e,t,s){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+s:Math.ceil(e/t)+" "+s+"s"}var n=1e3,a=60*n,r=60*a,i=24*r,o=365.25*i;e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*a;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return t.long?function(e){return s(e,i,"day")||s(e,r,"hour")||s(e,a,"minute")||s(e,n,"second")||e+" ms"}(e):function(e){return e>=i?Math.round(e/i)+"d":e>=r?Math.round(e/r)+"h":e>=a?Math.round(e/a)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},FlvL:function(e,t){},"Fy0/":function(e,t,s){(function(n){function a(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=Object({NODE_ENV:"production"}).DEBUG),e}(t=e.exports=s("vmzn")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var s=this.useColors;if(e[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+e[0]+(s?"%c ":" ")+"+"+t.humanize(this.diff),s){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(a++,"%c"===e&&(r=a))}),e.splice(r,0,n)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=a,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(a())}).call(t,s("W2nU"))},dmip:function(e,t){},hU7x:function(e,t,s){function n(){}var a=s("Fy0/")("jsonp");e.exports=function(e,t,s){function i(){o.parentNode&&o.parentNode.removeChild(o),window[u]=n,c&&clearTimeout(c)}"function"==typeof t&&(s=t,t={}),t||(t={});var o,c,l=t.prefix||"__jp",u=t.name||l+r++,d=t.param||"callback",p=null!=t.timeout?t.timeout:6e4,f=encodeURIComponent,m=document.getElementsByTagName("script")[0]||document.head;return p&&(c=setTimeout(function(){i(),s&&s(new Error("Timeout"))},p)),window[u]=function(e){a("jsonp got",e),i(),s&&s(null,e)},e+=(~e.indexOf("?")?"&":"?")+d+"="+f(u),e=e.replace("?&","?"),a('jsonp req "%s"',e),o=document.createElement("script"),o.src=e,m.parentNode.insertBefore(o,m),function(){window[u]&&i()}};var r=0},vmzn:function(e,t,s){function n(e){function s(){if(s.enabled){var e=s,n=+new Date,r=n-(a||n);e.diff=r,e.prev=a,e.curr=n,a=n;for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(s,n){if("%%"===s)return s;c++;var a=t.formatters[n];if("function"==typeof a){var r=i[c];s=a.call(e,r),i.splice(c,1),c--}return s}),t.formatArgs.call(e,i);(s.log||t.log||console.log.bind(console)).apply(e,i)}}return s.namespace=e,s.enabled=t.enabled(e),s.useColors=t.useColors(),s.color=function(e){var s,n=0;for(s in e)n=(n<<5)-n+e.charCodeAt(s),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(s),s}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length,a=0;a<n;a++)s[a]&&("-"===(e=s[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var s,n;for(s=0,n=t.skips.length;s<n;s++)if(t.skips[s].test(e))return!1;for(s=0,n=t.names.length;s<n;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s("EarI"),t.names=[],t.skips=[],t.formatters={};var a},zmxu:function(e,t){}});