webpackJsonp([27],{"8kJx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("VsUZ"),i=a("I9qK"),n=a("Au9i"),r={name:"MyCenter",data:function(){return{clientvid:0,avatar:null,popupVisible:!1,slots:[{defaultIndex:1}],uname:"",phone:"",sexStyle:[{name:"男",value:1},{name:"女",value:2}],sex:"",sexText:"",startDate:new Date("1960/1/1"),endDate:new Date,birthday:""}},created:function(){},mounted:function(){this.clientvid=this.$store.getters.getStorage.vid,this._getMyCenter()},computed:{},methods:{_getMyCenter:function(){var t=this;Object(s.R)({clientvid:this.clientvid}).then(function(e){t.uname=e.uname,t.phone=e.phone,t.avatar=e.headimg,t.birthday=e.birthday||"",t.sex=e.sex,t.sexText=0==e.sex?"保密":1==e.sex?"男":"女"})},changeSex:function(){this.popupVisible=!0,this.slots=[{defaultIndex:0,flex:1,values:this.sexStyle,textAlign:"center"}]},cancle:function(){this.popupVisible=!1},select:function(){this.popupVisible=!1;var t=this.$refs.pickerObj.getValues();this.sex=t[0].value,this.sexText=t[0].name,this.popupVisible=!1},cusBirth:function(t){this.$refs[t].open()},handleChange:function(t){this.birthday=Object(i.a)(t.toString(),"yyyy-MM-dd")},setAvatar:function(){this.$refs.avatarInput.click()},changeImage:function(t){var e=t.target.files[0],a=new FileReader,i=this;a.readAsDataURL(e),a.onload=function(t){Object(s.r)({headimg:this.result}).then(function(t){i.avatar=t.headimg}).catch(function(t){Object(n.Toast)(t)})}},save:function(){var t=this,e={clientvid:this.clientvid,uname:this.uname,sex:this.sex,birthday:this.birthday,headimg:this.avatar};n.MessageBox.confirm("是否确定保存信息","").then(function(a){Object(s.v)(e).then(function(e){e&&!e.errorCode&&(t.$store.commit("showToast","修改成功"),t.$store.commit("delay",{url:"/UserCenter/UserCenterIndex",$router:t.$router}))})}).catch(function(){})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"selfCenter mask"},[s("ul",[s("li",{staticClass:"userLogo"},[s("span",[t._v("头像")]),t._v(" "),s("div",{staticClass:"selfRight"},[s("div",{staticClass:"img-box fl"},[s("img",{staticClass:"defaultLogo",attrs:{src:t.avatar,alt:"头像"},on:{click:t.setAvatar}}),t._v(" "),s("input",{ref:"avatarInput",staticStyle:{display:"none"},attrs:{type:"file",name:"avatar",accept:"image/*"},on:{change:function(e){t.changeImage(e)}}})]),t._v(" "),s("img",{staticClass:"rightArrow",attrs:{src:a("q8gq"),alt:""}})])]),t._v(" "),s("li",[s("span",[t._v("用户名")]),t._v(" "),s("div",{staticClass:"selfRight"},[s("span",{staticClass:"grayColor"},[t._v(t._s(t.phone))]),t._v(" "),s("img",{staticClass:"rightArrow",attrs:{src:a("q8gq"),alt:""}})])]),t._v(" "),s("li",[s("span",[t._v("昵称")]),t._v(" "),s("div",{staticClass:"selfRight"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.uname,expression:"uname"}],staticClass:"uname",attrs:{placeholder:"请输入昵称"},domProps:{value:t.uname},on:{input:function(e){e.target.composing||(t.uname=e.target.value)}}}),t._v(" "),s("img",{staticClass:"rightArrow",attrs:{src:a("q8gq"),alt:""}})])]),t._v(" "),s("li",{on:{click:function(e){e.stopPropagation(),t.changeSex(e)}}},[s("span",[t._v("性别")]),t._v(" "),s("div",{staticClass:"selfRight"},[s("span",{staticClass:"grayColor"},[t._v(t._s(t.sexText))]),t._v(" "),s("img",{staticClass:"rightArrow",attrs:{src:a("q8gq"),alt:""}})]),t._v(" "),s("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("div",{staticClass:"picker-toolbar"},[s("span",{staticClass:"mint-datetime-cancel",on:{click:function(e){e.stopPropagation(),t.cancle(e)}}},[t._v("取消")]),t._v(" "),s("span",{staticClass:"mint-datetime-confirm",on:{click:function(e){e.stopPropagation(),t.select(e)}}},[t._v("确定")])]),t._v(" "),s("mt-picker",{ref:"pickerObj",attrs:{slots:t.slots,valueKey:"name"}})],1)],1),t._v(" "),s("li",{on:{click:function(e){e.stopPropagation(),t.cusBirth("birthPicker")}}},[s("span",[t._v("出生日期")]),t._v(" "),s("div",{staticClass:"fr setPadding"},[s("span",{staticClass:"inp grayColor",class:{blackColor:""!=t.birthday}},[t._v(t._s(""==t.birthday?"请选择日期":t.birthday))]),t._v(" "),s("img",{staticClass:"rightArrow",attrs:{src:a("q8gq"),alt:""}})])])]),t._v(" "),s("mt-datetime-picker",{ref:"birthPicker",attrs:{type:"date",startDate:t.startDate,endDate:t.endDate,"year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:t.handleChange}}),t._v(" "),s("div",{staticClass:"btnWrap",on:{click:t.save}},[s("button",[t._v("保存")])])],1)},staticRenderFns:[]},c=a("VU/8")(r,o,!1,function(t){a("jpVx")},"data-v-e56a6214",null);e.default=c.exports},jpVx:function(t,e){}});